{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="{% static 'img/icons/favicon.png' %}" />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SPA Static Downloader</title>
    <link rel="stylesheet" href="{% static 'styles/styles.css' %}" />
    <script type="text/javascript" src="{% static 'js/color_mode.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/loading.js' %}"></script>
  </head>

  <body>
    <nav class="nav">
      <div class="logo">SPA Downloader</div>

      <ul>
        <li>
          <a href="{% url 'home' %}">Home</a>
        </li>
        <li>
          <a href="{% url 'about' %}">How It Works</a>
        </li>

        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme" onclick="chooseColorMode()"></button>
      </ul>
    </nav>

    <main class="fade-in container" style="position: relative;">
      <h1 class="title">Download Static Copies of SPA Sites</h1>
      <p class="subtitle">Enter the URL of a site built with React, Vue, etc., and get a zipped static version.</p>

      <div id="formContainer" style="display: flex;justify-content: center;align-items: center;">
        <form id="downloadForm" method="POST" action="{% url 'download_zip' %}">
          {% csrf_token %}

          <div class="inputUrl" style="display: flex; justify-content: center; align-items: center; margin-bottom: 1rem;">{{ form.input_url }}</div>

          <div class="inputCaptcha" style="display: flex; justify-content: center; align-items: center; margin-bottom: 1rem;">{{ form.captcha }}</div>

          <div id="submitBtn" style="display: inline-block; cursor:pointer; text-align:center;">
            <button type="submit" id="downloadBtn">Generate ZIP</button>
          </div>
        </form>
      </div>

      <div id="loadingContainer" style="display: none;position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 9999;justify-content: center;align-items: center;">
          <img src="{% static 'img/gifs/loading.gif' %}" alt="loading GIF" style="max-width:90%; max-height:90%; border:5px solid white; border-radius:8px;" />
      </div>
    </main>

    <footer class="footer">
      <p>
        Â© {{ year }} SPA Downloader. Made By <a href="https://github.com/BrunoRNS/">BrunoRNS</a>. Licensed under <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank">GPLv3</a>.
      </p>
    </footer>

    <script>
        const HOME_URL = "{% url 'home' %}";
    </script>

    <script type="text/javascript" src="{% static 'js/home.js' %}"></script>
  </body>
</html>
